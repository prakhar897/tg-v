<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1, viewport-fit=cover"
		/>
		<title>Will you be my Valentine?</title>

		<!-- Confetti library -->
		<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

		<style>
			:root {
				--bg1: #fff1f7;
				--bg2: #ffe4f1;
				--card: #ffffffee;
				--primary: #ff5fa2;
				--primaryHover: #ff3b90;
				--secondary: #ffd1e8;
				--text: #4a044e;
			}

			* {
				box-sizing: border-box;
			}

			body {
				margin: 0;
				min-height: 100svh;
				display: grid;
				place-items: center;
				background: radial-gradient(
					circle at top,
					var(--bg2),
					var(--bg1)
				);
				font-family: "Comic Sans MS", "Poppins", system-ui, sans-serif;
				overflow: hidden;
				padding: 16px;
				color: var(--text);
			}

			#confettiCanvas {
				position: fixed;
				inset: 0;
				width: 100vw;
				height: 100vh;
				pointer-events: none;
				z-index: 9999;
			}

			.card {
				width: min(720px, 92vw);
				padding: 28px 22px;
				background: var(--card);
				border-radius: 26px;
				text-align: center;
				box-shadow: 0 22px 60px rgba(255, 95, 162, 0.35);
				border: 3px solid #ffd6ec;
			}

			.art {
				width: min(260px, 80vw);
				margin: 0 auto 12px;
				display: block;
				filter: drop-shadow(0 10px 16px rgba(255, 95, 162, 0.4));
			}

			h1 {
				font-size: clamp(26px, 4vw, 44px);
				margin: 14px 0 20px;
				font-weight: 900;
			}

			.button-zone {
				position: relative;
				width: min(520px, 92%);
				height: 150px;
				margin: 0 auto;
				touch-action: none;
			}

			button {
				position: absolute;
				top: 50%;
				transform: translateY(-50%);
				padding: 16px 26px;
				font-size: 18px;
				font-weight: 900;
				border-radius: 999px;
				border: none;
				cursor: pointer;
				box-shadow: 0 12px 26px rgba(255, 95, 162, 0.4);
				user-select: none;
				-webkit-tap-highlight-color: transparent;
				transition:
					transform 0.12s ease,
					background 0.12s ease;
			}

			#yesBtn {
				left: 18%;
				background: linear-gradient(135deg, #ff77b7, #ff4d9a);
				color: white;
			}

			#yesBtn:hover {
				background: linear-gradient(135deg, #ff5fa2, #ff2f87);
			}

			#noBtn {
				left: 62%;
				background: var(--secondary);
				color: #831843;
			}

			.hint {
				margin-top: 10px;
				font-size: 14px;
				opacity: 0.75;
			}

			.result {
				display: none;
				margin-top: 20px;
				animation: pop 0.35s ease;
			}

			.result h2 {
				font-size: clamp(30px, 4.5vw, 46px);
				margin: 10px 0;
			}

			.fireworks {
				width: min(380px, 90vw);
				margin: 0 auto;
				display: block;
				border-radius: 16px;
			}

			@keyframes pop {
				from {
					transform: scale(0.95);
					opacity: 0;
				}
				to {
					transform: scale(1);
					opacity: 1;
				}
			}
		</style>
	</head>

	<body>
		<canvas id="confettiCanvas"></canvas>

		<main class="card">
			<!-- ANIMAL WITH HEART -->
			<svg
				class="art"
				viewBox="0 0 320 240"
				xmlns="http://www.w3.org/2000/svg"
			>
				<defs>
					<linearGradient id="fur" x1="0" x2="1">
						<stop offset="0" stop-color="#ffd1a9" />
						<stop offset="1" stop-color="#ffb47d" />
					</linearGradient>
					<linearGradient id="heart" x1="0" x2="1">
						<stop offset="0" stop-color="#ff5fa2" />
						<stop offset="1" stop-color="#ff2f87" />
					</linearGradient>
				</defs>

				<path
					d="M250 50 C250 33 270 25 282 38
               C294 25 314 33 314 50
               C314 78 282 92 282 106
               C282 92 250 78 250 50Z"
					fill="url(#heart)"
				/>

				<path
					d="M90 120 C90 70 140 40 190 60
               C240 40 290 70 290 120
               C290 180 240 210 190 210
               C140 210 90 180 90 120Z"
					fill="url(#fur)"
				/>

				<path d="M110 92 L95 55 L140 78 Z" fill="#ffb47d" />
				<path d="M270 92 L285 55 L240 78 Z" fill="#ffb47d" />

				<circle cx="160" cy="130" r="8" />
				<circle cx="220" cy="130" r="8" />

				<path
					d="M190 144 C186 144 182 148 182 152
               C182 160 190 164 190 170
               C190 164 198 160 198 152
               C198 148 194 144 190 144Z"
					fill="#ff7ab8"
				/>
			</svg>

			<h1>tanu will you be my valentine?</h1>

			<section class="button-zone" id="zone">
				<button id="yesBtn">Yes</button>
				<button id="noBtn">No</button>
			</section>

			<div class="hint" id="hint">‚ÄúNo‚Äù seems a bit shy üòà</div>

			<section class="result" id="result">
				<h2>YAY! üéâ</h2>
				<img
					class="fireworks"
					src="https://media1.tenor.com/m/ecB3UL30KxcAAAAC/meowl-heart.gif"
					alt="Fireworks"
				/>
			</section>
		</main>

		<script>
			const zone = document.getElementById("zone");
			const yesBtn = document.getElementById("yesBtn");
			const noBtn = document.getElementById("noBtn");
			const result = document.getElementById("result");
			const hint = document.getElementById("hint");

			const confettiCanvas = document.getElementById("confettiCanvas");

			function resizeConfettiCanvas() {
				const dpr = Math.max(1, window.devicePixelRatio || 1);
				confettiCanvas.width = window.innerWidth * dpr;
				confettiCanvas.height = window.innerHeight * dpr;
				confettiCanvas.style.width = "100vw";
				confettiCanvas.style.height = "100vh";
			}

			resizeConfettiCanvas();
			window.addEventListener("resize", resizeConfettiCanvas);

			const confettiInstance = confetti.create(confettiCanvas, {
				resize: false,
				useWorker: true,
			});

			function fullScreenConfetti() {
				const end = Date.now() + 1600;
				(function frame() {
					confettiInstance({
						particleCount: 12,
						spread: 90,
						startVelocity: 45,
						ticks: 180,
						origin: { x: Math.random(), y: Math.random() * 0.3 },
					});
					if (Date.now() < end) requestAnimationFrame(frame);
				})();

				setTimeout(() => {
					confettiInstance({
						particleCount: 300,
						spread: 140,
						startVelocity: 60,
						ticks: 220,
						origin: { x: 0.5, y: 0.55 },
					});
				}, 300);
			}

			let yesScale = 1;
			function growYes() {
				yesScale = Math.min(2.2, yesScale + 0.1);
				yesBtn.style.transform = `translateY(-50%) scale(${yesScale})`;
			}

			function clamp(n, min, max) {
				return Math.max(min, Math.min(max, n));
			}

			function moveNo(px, py) {
				const z = zone.getBoundingClientRect();
				const b = noBtn.getBoundingClientRect();

				let dx = b.left + b.width / 2 - px;
				let dy = b.top + b.height / 2 - py;
				let mag = Math.hypot(dx, dy) || 1;
				dx /= mag;
				dy /= mag;

				let newLeft = b.left - z.left + dx * 150;
				let newTop = b.top - z.top + dy * 150;

				newLeft = clamp(newLeft, 0, z.width - b.width);
				newTop = clamp(newTop, 0, z.height - b.height);

				noBtn.style.left = newLeft + "px";
				noBtn.style.top = newTop + "px";
				noBtn.style.transform = "none";

				growYes();
			}

			zone.addEventListener("pointermove", (e) => {
				const b = noBtn.getBoundingClientRect();
				const d = Math.hypot(
					b.left + b.width / 2 - e.clientX,
					b.top + b.height / 2 - e.clientY,
				);
				if (d < 140) moveNo(e.clientX, e.clientY);
			});

			noBtn.addEventListener("click", (e) => e.preventDefault());

			yesBtn.addEventListener("click", () => {
				zone.style.display = "none";
				hint.style.display = "none";
				result.style.display = "block";
				fullScreenConfetti();
			});
		</script>
	</body>
</html>
